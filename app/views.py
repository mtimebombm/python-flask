from flask import render_template,flash,redirect,url_for
from app import app 
from .forms import LoginForm,IpForm,ip_profile_service
from pandas import Series,DataFrame
import pandas as pd
import numpy as np
import MySQLdb
import pandas.io.sql as sql

conn = MySQLdb.connect (host = "192.168.29.30",user = "root",passwd = "cyberaudit",db = "cyberaudit_data")


@app.route('/')
@app.route('/index')
def index():
	user = { 'nickname': 'Miguel' } # fake user
	posts = [ # fake array of posts
        {
            'author': { 'nickname': 'John' },
            'body': 'Beautiful day in Portland!'
        },
        {
            'author': { 'nickname': 'Susan' },
            'body': 'The Avengers movie was so cool!'
        }
    	]
	return render_template("index.html", title = 'nihao', user = user, posts = posts)

@app.route('/login', methods = ['GET', 'POST'])
def login():
	form = LoginForm()
	if form.validate_on_submit():
		flash('Login requested for OpenID="' + form.openid.data + '", remember_me=' + str(form.remember_me.data))
		return redirect('/index')
	return render_template('login.html', title = 'Sign In', form=form, providers = app.config['OPENID_PROVIDERS'])


@app.route('/echar_test/<ip>')
def echar_test(ip):
	in_data = [[3232250192, 2, 0, 0, 847, 70221488, 713902864, 847,70221488, 713902864, 0, 0, 0, 0, 0, 0,[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 91.0, 218.0, 26.0, 43.0, 53.0, 93.0, 148.0, 35.0, 77.0, 43.0, 13.0, 7.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9320928.0, 22221304.0, 1459064.0, 1335680.0, 2832560.0, 10252488.0, 9766504.0, 2159600.0, 4098080.0, 3205152.0, 2749392.0, 820736.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 101806016.0, 202817128.0, 4027472.0, 12651560.0, 28343152.0, 91708216.0, 142113344.0, 17097296.0, 30809128.0, 36411968.0, 36857056.0, 9260528.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 91.0, 218.0, 26.0, 43.0, 53.0, 93.0, 148.0, 35.0, 77.0, 43.0, 13.0, 7.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9320928.0, 22221304.0, 1459064.0, 1335680.0, 2832560.0, 10252488.0, 9766504.0, 2159600.0, 4098080.0, 3205152.0, 2749392.0, 820736.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 101806016.0, 202817128.0, 4027472.0, 12651560.0, 28343152.0, 91708216.0, 142113344.0, 17097296.0, 30809128.0, 36411968.0, 36857056.0, 9260528.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 177.0, 145.0, 302.0, 100.0, 123.0, 0.0],[0.0, 24787080.0, 15385824.0, 16609504.0, 5087928.0, 8351152.0, 0.0],[0.0, 289429632.0, 190301952.0, 106107864.0, 34156688.0, 93906728.0, 0.0],[0.0, 177.0, 145.0, 302.0, 100.0, 123.0, 0.0],[0.0, 24787080.0, 15385824.0, 16609504.0, 5087928.0, 8351152.0, 0.0],[0.0, 289429632.0, 190301952.0, 106107864.0, 34156688.0, 93906728.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]],
	[3232250192, 1, 6, 80, 840, 70106304, 713212736, 840,70106304, 713212736, 0, 0, 0, 0, 0, 0,[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 91.0, 217.0, 26.0, 43.0, 53.0, 87.0, 148.0, 35.0, 77.0, 43.0, 13.0, 7.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9320928.0, 22209512.0, 1459064.0, 1335680.0, 2832560.0, 10149096.0, 9766504.0, 2159600.0, 4098080.0, 3205152.0, 2749392.0, 820736.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 101806016.0, 202784296.0, 4027472.0, 12651560.0, 28343152.0, 91050920.0, 142113344.0, 17097296.0, 30809128.0, 36411968.0, 36857056.0, 9260528.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 91.0, 217.0, 26.0, 43.0, 53.0, 87.0, 148.0, 35.0, 77.0, 43.0, 13.0, 7.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 9320928.0, 22209512.0, 1459064.0, 1335680.0, 2832560.0, 10149096.0, 9766504.0, 2159600.0, 4098080.0, 3205152.0, 2749392.0, 820736.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 101806016.0, 202784296.0, 4027472.0, 12651560.0, 28343152.0, 91050920.0, 142113344.0, 17097296.0, 30809128.0, 36411968.0, 36857056.0, 9260528.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 176.0, 145.0, 296.0, 100.0, 123.0, 0.0],[0.0, 24775288.0, 15385824.0, 16506112.0, 5087928.0, 8351152.0, 0.0],[0.0, 289396800.0, 190301952.0, 105450568.0, 34156688.0, 93906728.0, 0.0],[0.0, 176.0, 145.0, 296.0, 100.0, 123.0, 0.0],[0.0, 24775288.0, 15385824.0, 16506112.0, 5087928.0, 8351152.0, 0.0],[0.0, 289396800.0, 190301952.0, 105450568.0, 34156688.0, 93906728.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]],
	[3232250192, 1, 6, 443, 7, 115184, 690128, 7, 115184,690128, 0, 0, 0, 0, 0, 0,[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 6.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 11792.0, 0.0, 0.0, 0.0, 103392.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 32832.0, 0.0, 0.0, 0.0, 657296.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 6.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 11792.0, 0.0, 0.0, 0.0, 103392.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 32832.0, 0.0, 0.0, 0.0, 657296.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 1.0, 0.0, 6.0, 0.0, 0.0, 0.0],[0.0, 11792.0, 0.0, 103392.0, 0.0, 0.0, 0.0],[0.0, 32832.0, 0.0, 657296.0, 0.0, 0.0, 0.0],[0.0, 1.0, 0.0, 6.0, 0.0, 0.0, 0.0],[0.0, 11792.0, 0.0, 103392.0, 0.0, 0.0, 0.0],[0.0, 32832.0, 0.0, 657296.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]]]
	
	out_data = [[3232250192, -2, 0, 0, 477, 6085376, 3159744, 16, 258336,0, 32, 185608, 1839176, 429, 5641432, 1320568,[2.0, 14.0, 11.0, 2.0, 61.0, 0.0, 0.0, 0.0, 0.0, 50.0, 0.0, 0.0, 25.0, 42.0, 49.0, 0.0, 0.0, 27.0, 85.0, 25.0, 5.0, 2.0, 2.0, 75.0],[12144.0, 688064.0, 693304.0, 4760.0, 806600.0, 0.0, 0.0, 0.0, 0.0, 126672.0, 0.0, 0.0, 62840.0, 112128.0, 125952.0, 0.0, 0.0, 1375784.0, 226392.0, 51080.0, 23744.0, 4760.0, 12624.0, 1758528.0],[55776.0, 467880.0, 404064.0, 0.0, 398480.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 7712.0, 1112.0, 0.0, 0.0, 0.0, 866712.0, 41792.0, 7880.0, 0.0, 0.0, 55328.0, 853008.0],[0.0, 1.0, 1.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 2.0, 2.0, 0.0, 1.0, 0.0, 0.0, 3.0],[0.0, 6624.0, 6624.0, 0.0, 33120.0, 0.0, 0.0, 0.0, 0.0, 26496.0, 0.0, 0.0, 13248.0, 26496.0, 26496.0, 0.0, 0.0, 13248.0, 48576.0, 0.0, 15456.0, 0.0, 0.0, 41952.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 5.0, 0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 12.0, 0.0, 1.0, 0.0, 0.0, 0.0, 8.0],[0.0, 26416.0, 0.0, 0.0, 30736.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3768.0, 0.0, 0.0, 0.0, 0.0, 67944.0, 0.0, 3768.0, 0.0, 0.0, 0.0, 52976.0],[0.0, 314624.0, 0.0, 0.0, 299544.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5720.0, 0.0, 0.0, 0.0, 0.0, 629136.0, 0.0, 5408.0, 0.0, 0.0, 0.0, 584744.0],[2.0, 8.0, 10.0, 2.0, 54.0, 0.0, 0.0, 0.0, 0.0, 49.0, 0.0, 0.0, 23.0, 41.0, 48.0, 0.0, 0.0, 13.0, 83.0, 24.0, 4.0, 2.0, 2.0, 64.0],[12144.0, 655024.0, 686680.0, 4760.0, 742744.0, 0.0, 0.0, 0.0, 0.0, 100176.0, 0.0, 0.0, 45824.0, 85632.0, 99456.0, 0.0, 0.0, 1294592.0, 177816.0, 47312.0, 8288.0, 4760.0, 12624.0, 1663600.0],[55776.0, 153256.0, 404064.0, 0.0, 98936.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1992.0, 1112.0, 0.0, 0.0, 0.0, 237576.0, 41792.0, 2472.0, 0.0, 0.0, 55328.0, 268264.0],[42.0, 135.0, 179.0, 28.0, 23.0, 58.0, 12.0],[771056.0, 361624.0, 457440.0, 1366088.0, 1393240.0, 1056216.0, 679712.0],[531672.0, 97568.0, 7880.0, 810584.0, 868680.0, 444832.0, 398528.0],[2.0, 3.0, 4.0, 2.0, 2.0, 2.0, 1.0],[19872.0, 75072.0, 94944.0, 13248.0, 13248.0, 35328.0, 6624.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[8.0, 0.0, 1.0, 10.0, 5.0, 3.0, 5.0],[41936.0, 0.0, 3768.0, 57152.0, 29776.0, 23200.0, 29776.0],[335584.0, 0.0, 5408.0, 614168.0, 297592.0, 287152.0, 299272.0],[32.0, 132.0, 174.0, 16.0, 16.0, 53.0, 6.0],[709248.0, 286552.0, 358728.0, 1295688.0, 1350216.0, 997688.0, 643312.0],[196088.0, 97568.0, 2472.0, 196416.0, 571088.0, 157680.0, 99256.0]],
	[3232250192, -1, 17, 53, 411, 795208, 86000, 0, 0, 0, 0,0, 0, 411, 795208, 86000,[1.0, 6.0, 7.0, 2.0, 53.0, 0.0, 0.0, 0.0, 0.0, 48.0, 0.0, 0.0, 23.0, 41.0, 48.0, 0.0, 0.0, 10.0, 81.0, 24.0, 4.0, 2.0, 1.0, 60.0],[680.0, 3976.0, 8056.0, 4760.0, 102728.0, 0.0, 0.0, 0.0, 0.0, 99456.0, 0.0, 0.0, 45824.0, 85632.0, 99456.0, 0.0, 0.0, 6568.0, 165584.0, 47312.0, 8288.0, 4760.0, 680.0, 111448.0],[1456.0, 12176.0, 6632.0, 0.0, 9688.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1992.0, 1112.0, 0.0, 0.0, 0.0, 21976.0, 4480.0, 2472.0, 0.0, 0.0, 1456.0, 22560.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[1.0, 6.0, 7.0, 2.0, 53.0, 0.0, 0.0, 0.0, 0.0, 48.0, 0.0, 0.0, 23.0, 41.0, 48.0, 0.0, 0.0, 10.0, 81.0, 24.0, 4.0, 2.0, 1.0, 60.0],[680.0, 3976.0, 8056.0, 4760.0, 102728.0, 0.0, 0.0, 0.0, 0.0, 99456.0, 0.0, 0.0, 45824.0, 85632.0, 99456.0, 0.0, 0.0, 6568.0, 165584.0, 47312.0, 8288.0, 4760.0, 680.0, 111448.0],[1456.0, 12176.0, 6632.0, 0.0, 9688.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1992.0, 1112.0, 0.0, 0.0, 0.0, 21976.0, 4480.0, 2472.0, 0.0, 0.0, 1456.0, 22560.0],[29.0, 128.0, 174.0, 14.0, 11.0, 50.0, 5.0],[49776.0, 262136.0, 358728.0, 16088.0, 7936.0, 97248.0, 3296.0],[14784.0, 5936.0, 2472.0, 20408.0, 21944.0, 9816.0, 10640.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[29.0, 128.0, 174.0, 14.0, 11.0, 50.0, 5.0],[49776.0, 262136.0, 358728.0, 16088.0, 7936.0, 97248.0, 3296.0],[14784.0, 5936.0, 2472.0, 20408.0, 21944.0, 9816.0, 10640.0]],
	[3232250192, -1, 6, 80, 36, 220352, 2148344, 0, 0, 0, 32,185608, 1839176, 4, 34744, 309168,[0.0, 5.0, 2.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 12.0, 1.0, 1.0, 0.0, 0.0, 0.0, 9.0],[0.0, 26416.0, 24928.0, 0.0, 30736.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3768.0, 0.0, 0.0, 0.0, 0.0, 67944.0, 3736.0, 3768.0, 0.0, 0.0, 0.0, 59056.0],[0.0, 314624.0, 298616.0, 0.0, 299544.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5720.0, 0.0, 0.0, 0.0, 0.0, 629136.0, 3784.0, 5408.0, 0.0, 0.0, 0.0, 591512.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 5.0, 0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 12.0, 0.0, 1.0, 0.0, 0.0, 0.0, 8.0],[0.0, 26416.0, 0.0, 0.0, 30736.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3768.0, 0.0, 0.0, 0.0, 0.0, 67944.0, 0.0, 3768.0, 0.0, 0.0, 0.0, 52976.0],[0.0, 314624.0, 0.0, 0.0, 299544.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 5720.0, 0.0, 0.0, 0.0, 0.0, 629136.0, 0.0, 5408.0, 0.0, 0.0, 0.0, 584744.0],[0.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0],[0.0, 0.0, 24928.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3736.0, 0.0, 0.0, 0.0, 0.0, 6080.0],[0.0, 0.0, 298616.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3784.0, 0.0, 0.0, 0.0, 0.0, 6768.0],[8.0, 1.0, 1.0, 10.0, 7.0, 4.0, 5.0],[41936.0, 3736.0, 3768.0, 57152.0, 54704.0, 29280.0, 29776.0],[335584.0, 3784.0, 5408.0, 614168.0, 596208.0, 293920.0, 299272.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[8.0, 0.0, 1.0, 10.0, 5.0, 3.0, 5.0],[41936.0, 0.0, 3768.0, 57152.0, 29776.0, 23200.0, 29776.0],[335584.0, 0.0, 5408.0, 614168.0, 297592.0, 287152.0, 299272.0],[0.0, 1.0, 0.0, 0.0, 2.0, 1.0, 0.0],[0.0, 3736.0, 0.0, 0.0, 24928.0, 6080.0, 0.0],[0.0, 3784.0, 0.0, 0.0, 298616.0, 6768.0, 0.0]],
	[3232250192, -1, 17, 137, 16, 258336, 0, 16, 258336, 0,0, 0, 0, 0, 0, 0,[0.0, 1.0, 1.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 2.0, 2.0, 0.0, 1.0, 0.0, 0.0, 3.0],[0.0, 6624.0, 6624.0, 0.0, 33120.0, 0.0, 0.0, 0.0, 0.0, 26496.0, 0.0, 0.0, 13248.0, 26496.0, 26496.0, 0.0, 0.0, 13248.0, 48576.0, 0.0, 15456.0, 0.0, 0.0, 41952.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 1.0, 1.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 2.0, 2.0, 0.0, 1.0, 0.0, 0.0, 3.0],[0.0, 6624.0, 6624.0, 0.0, 33120.0, 0.0, 0.0, 0.0, 0.0, 26496.0, 0.0, 0.0, 13248.0, 26496.0, 26496.0, 0.0, 0.0, 13248.0, 48576.0, 0.0, 15456.0, 0.0, 0.0, 41952.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[2.0, 3.0, 4.0, 2.0, 2.0, 2.0, 1.0],[19872.0, 75072.0, 94944.0, 13248.0, 13248.0, 35328.0, 6624.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[2.0, 3.0, 4.0, 2.0, 2.0, 2.0, 1.0],[19872.0, 75072.0, 94944.0, 13248.0, 13248.0, 35328.0, 6624.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]],
	[3232250192, -1, 6, 443, 13, 4810760, 925400, 0, 0, 0, 0,0, 0, 13, 4810760, 925400,[1.0, 2.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.0, 1.0, 0.0, 0.0, 0.0, 1.0, 3.0],[11464.0, 651048.0, 653696.0, 0.0, 640016.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1288024.0, 8496.0, 0.0, 0.0, 0.0, 11944.0, 1546072.0],[54320.0, 141080.0, 98816.0, 0.0, 89248.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 215600.0, 33528.0, 0.0, 0.0, 0.0, 53872.0, 238936.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[1.0, 2.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.0, 1.0, 0.0, 0.0, 0.0, 1.0, 3.0],[11464.0, 651048.0, 653696.0, 0.0, 640016.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1288024.0, 8496.0, 0.0, 0.0, 0.0, 11944.0, 1546072.0],[54320.0, 141080.0, 98816.0, 0.0, 89248.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 215600.0, 33528.0, 0.0, 0.0, 0.0, 53872.0, 238936.0],[3.0, 2.0, 0.0, 2.0, 3.0, 2.0, 1.0],[659472.0, 19960.0, 0.0, 1279600.0, 1317352.0, 894360.0, 640016.0],[181304.0, 87848.0, 0.0, 176008.0, 250528.0, 141096.0, 88616.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[3.0, 2.0, 0.0, 2.0, 3.0, 2.0, 1.0],[659472.0, 19960.0, 0.0, 1279600.0, 1317352.0, 894360.0, 640016.0],[181304.0, 87848.0, 0.0, 176008.0, 250528.0, 141096.0, 88616.0]],
	[3232250192, -1, 17, 123, 1, 720, 0, 0, 0, 0, 0, 0, 0,1, 720, 0,[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 720.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 720.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 720.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 720.0, 0.0, 0.0, 0.0, 0.0, 0.0],[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]]]
	
	data = [in_data, out_data]
	
	#ip_profile_service2 = sql.read_sql("select * from ip_profile_service", conn, "id")
	return render_template("echar_test.html",data=data, ip=ip)

@app.route('/echarts.min.js')
@app.route('/echar_test/echarts.min.js')
@app.route('/mysqltest/echarts.min.js')
def echar_js():
	return render_template("echarts.min.js")
	
@app.route('/echar_test', methods = ['GET', 'POST'])
def ip_input():
	form = IpForm()
	if form.validate_on_submit():
		#return redirect(url_for('echar_test', ip=form.ip.data))
		return redirect(url_for('mysqltest', ip=form.ip.data))
	return render_template('input_ip.html', title = 'Sign In', form=form, providers = app.config['OPENID_PROVIDERS'])

@app.route('/mysqltest/<ip>')
def mysqltest(ip):
	key = ["frequency_24_hour","up_byte_24_hour","down_byte_24_hour","eth_frequency_24_hour",
    "eth_up_byte_24_hour","eth_down_byte_24_hour","intra_frequency_24_hour","intra_up_byte_24_hour",
    "intra_down_byte_24_hour","inter_frequency_24_hour","inter_up_byte_24_hour","inter_down_byte_24_hour",
    "frequency_7_day","up_byte_7_day","down_byte_7_day","eth_frequency_7_day","eth_up_byte_7_day",
    "eth_down_byte_7_day","intra_frequency_7_day","intra_up_byte_7_day","intra_down_byte_7_day",
    "inter_frequency_7_day","inter_up_byte_7_day","inter_down_byte_7_day"]
	in_data = []
	out_data = []
	sql_str = "select * from ip_profile_service where ip=inet_aton('"+ip+"')"
	ip_profile_service1 = sql.read_sql(sql_str, conn, "id")
	for key_id in key:
		ip_profile_service1[key_id] = [[float(a) for a in z.split(",")] for z in ip_profile_service1[key_id]]
	data_list = ip_profile_service1.T.to_dict(outtype='list').values()
	for i in data_list:
		if (i[1]>0):
			in_data.append(i)
		else:
			out_data.append(i)
			
	data = [in_data, out_data]
	return render_template("echar_test.html",data=data, ip=ip)
	
