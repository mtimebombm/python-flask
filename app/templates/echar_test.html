<!-- extend base layout -->
{% extends "base.html" %}

{% block content %}
	<!-- 引入 echarts.js -->
	<script src="echarts.min.js"></script>

	<script type="text/javascript">
		//绘制曲线图，timeData1表示24小时还是一周，info表示什么数据，比如上下行， data是具体数据值
		function show_curve(myChart, timeData1, info, data){
		
				var timeData = timeData1
				var info_s = []
				var data_s = []
				for(var i=0; i<info.length; i++){
					info_s[i] = info[i].toString();
					data_s[i] = {
						name:info_s[i],
						type:'line',
						symbolSize: 8,
						hoverAnimation: false,
						data:data[i]
					}
				}
				
				option = {
					title: {
						text: '雨量流量关系图',
						x: 'center'
					},
					tooltip: {
						trigger: 'axis',
						formatter: function (params) {
							return params[0].seriesName + '<br/>'
							+ params[0].name + '点:' + params[0].value + ' (bits)<br/>';
						},
						axisPointer: {
							animation: false
						}
					},
					legend: {
						data:info_s,
						x: 'left'
					},
					grid: [{
							left: 50,
							right: 50,
							height: '35%'
						}],
					xAxis : [
					{
						type : 'category',
						boundaryGap : false,
						axisLine: {onZero: true},
						data: timeData
					}
					],
					yAxis : [
					{
						name : '流量(b/h)',
						type : 'value',
					}
					],
					series : data_s
				};

				return option;
			}
			
			
			//绘制饼图
			function show_curve2(myChart, info, data){
				var info_s = []
				var data_s = []
				for(var i=0; i<info.length; i++){
					info_s[i] = info[i].toString();
					data_s[i] = {value:data[i], name:info_s[i]}
				}
				option = {
					title : {
						text: '流量汇总数据',
						subtext: '纯属虚构',
						x:'center'
					},
					tooltip : {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					legend: {
						orient: 'vertical',
						left: 'left',
						data: info_s
					},
					series : [
						{
							name: '访问来源',
							type: 'pie',
							radius : '60%',
							center: ['50%', '60%'],
							data: data_s,
							itemStyle: {
								emphasis: {
									shadowBlur: 10,
									shadowOffsetX: 0,
									shadowColor: 'rgba(0, 0, 0, 0.5)'
								}
							}
						}
					]
				};

				return option;
			}
			
	</script>	

	<div align="center"><h2><b>ip = {{ip}} 画像信息展示</b></h2></div>
	<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	<div>
	<div id="x1y1" style="width:600px;height:400px;float:left" align="center"></div>
	<div id="x1y2" style="width:600px;height:400px;float:right" align="center"></div>
	</div>
	<div>
	<div id="x2y1" style="width:600px;height:400px;float:left" align="center"></div>
	<div id="x2y2" style="width:600px;height:400px;float:right" align="center"></div>
	</div>
	<div>
	<div id="x3y1" style="width:600px;height:600px;float:left" align="center"></div>
	<div id="x3y2" style="width:600px;height:600px;float:right" align="center"></div>
	</div>
	<script type="text/javascript">
		// 基于准备好的dom，初始化echarts实例
		var myChart = echarts.init(document.getElementById('x1y1'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve2(myChart, {{data.info2}}, {{data.data2}}));
		
		myChart = echarts.init(document.getElementById('x1y2'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve2(myChart, {{data.info2}}, {{data.data2}}));
		
		myChart = echarts.init(document.getElementById('x2y1'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve2(myChart, {{data.info2}}, {{data.data2}}));
		
		myChart = echarts.init(document.getElementById('x2y2'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve2(myChart, {{data.info2}}, {{data.data2}}));
		
		myChart = echarts.init(document.getElementById('x3y1'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve(myChart, {{data.timeData}}, {{data.info}}, {{data.data}}));
		
		myChart = echarts.init(document.getElementById('x3y2'));
		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(show_curve(myChart, {{data.timeData}}, {{data.info}}, {{data.data}}));
	</script>

{% endblock %}
